
{% load static %}
<link rel="stylesheet" href="{% get_static_prefix %}New/assets/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css">

{% include "New/Extra/header.html" %}
          <!--  Header End -->
          <div class="card shadow-none position-relative overflow-hidden mb-4">
            <div class="card-body d-flex align-items-center justify-content-between p-4">
              <h4 class="card-title mb-0">View Package Info</h4>
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                  <li class="breadcrumb-item">
                    <a class="text-muted text-decoration-none" href="index.html">Home</a>
                  </li>
                  <li class="breadcrumb-item" aria-current="page">Package Info</li>
                </ol>
              </nav>
            </div>
          </div>
          <div class="datatables">
            <!-- start Zero Configuration -->
            <div class="card">
              <div class="card-body">

                <div class="row">
                  <div class="col-lg-4">
                    <div class="card">
                      <div class="card-body">
                        <div class="text-center">
                          <img src="{% get_media_prefix %}Jobs/{{Job.id}}.jpg?{{Rand}}" width="110" class="rounded-3 mb-3" alt="spike-img">
                          <h5 class="mb-1">{{Job.Title}}</h5>
                          <span class="badge bg-primary-subtle text-primary fw-light rounded-pill">{{Job.Experience}}</span>
                        </div>

                        <div class="hstack justify-content-between mt-5">
                          <div class="d-flex align-items-center">
                            <span class="bg-success-subtle p-6 rounded-3 round-50 hstack justify-content-center">
                              <i class="ti-angle-double-down text-success fs-7"></i>
                            </span>

                            <div class="ms-3">
                              <p class="fw-normal text-dark fs-5 mb-0">₵ {{Job.Min_Salary}}</p>
                              <p class="mb-0 fs-3">Minimume</p>
                            </div>
                          </div>

                          <div class="d-flex align-items-center">
                            <span class="bg-success-subtle p-6 rounded-3 round-50 hstack justify-content-center">
                              <i class="ti-angle-double-up text-success fs-7"></i>
                            </span>

                            <div class="ms-3">
                              <p class="fw-normal text-dark fs-5 mb-0">₵ {{Job.Max_Salary}}</p>
                              <p class="mb-0 fs-3">Maximume</p>
                            </div>
                          </div>
                        </div>

                        <div class="mt-5">
                          <div class="pb-1 mb-2 border-bottom">
                            <h6>Details</h6>
                          </div>

                          <ul>
                            <li class="py-2">
                              <p class="fw-normal text-dark mb-0">
                                Target Applicants:
                                <span class="fw-light text-secondary ms-1">{{Job.Title}}</span>
                              </p>
                            </li>

                            <li class="py-2">
                              <p class="fw-normal text-dark mb-0">
                                Job Type:
                                <span class="fw-light text-secondary ms-1">{{Job.Type}}</span>
                              </p>
                            </li>

                            <li class="py-2">
                              <p class="fw-normal text-dark mb-0">
                                Job Experience:
                                <span class="fw-light text-secondary ms-1">{{Job.Experience}}</span>
                              </p>
                            </li>

                            <li class="py-2">
                              <p class="fw-normal text-dark mb-0">
                                Minimume Salary:
                                <span class="fw-light text-secondary ms-1"> ₵ {{Job.Min_Salary}}</span>
                              </p>
                            </li>

                            <li class="py-2">
                              <p class="fw-normal text-dark mb-0">
                                Maximume Salary:
                                <span class="fw-light text-secondary ms-1"> ₵ {{Job.Max_Salary}}</span>
                              </p>
                            </li>

                            <li class="py-2">
                              <p class="fw-normal text-dark mb-0">
                                Package Description:
                                <br><span class="fw-light text-secondary ms-1">{{Job.About}}</span>
                              </p>
                            </li>


                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-8">
                    <div class="card" style='padding-bottom:20px '>
                    <div>
                      <div  class="col-lg-12 col-md-12 col-sm-12" style="padding-left:10px;padding-right:10px">
                        <div class="form-group">
                          <label class="form-label">Job Link</label>
                          <input type="text" name="e" value="https://www.sikobs.world/job_visa/{{Job.Link}}" required  class="form-control">
                        </div>
                      </div>
                    </div>
                  </div>
                    <div class="card">
                      <div class="card-body">
                        <div class="row">

                          {% for i in Jobs %}
                           <div class="col-md-6 col-lg-6">
                             <div class="card overflow-hidden hover-img">
                               <div class="position-relative">
                                 <a href="">
                                   <img src="{% get_media_prefix %}Profiles/{{i.id}}.jpg?{{Rand}}" style="height:350px;object-fit:cover" class="card-img-top" alt="spike-img">
                                 </a>
                                 <span class="badge text-bg-light fs-2 lh-sm mb-9 me-9 py-1 px-2 fw-semibold position-absolute bottom-0 end-0">{{i.Contact}}</span>

                               </div>
                               <div class="card-body p-4">
                                 <div class="d-flex align-items-center fs-2 ms-auto" style="text-align:right">
                                   <i class=" ti-bookmark-alt text-dark" style="padding-right:5px"></i> {{i.date}}
                                 </div>
                                 <span class="badge text-bg-light fs-2 py-1 px-2 lh-sm  mt-3">


                                   <select type="tel" id="state_{{i.id}}" style="border-color:transparent" onchange="stat_up('{{i.id}}')"  required class="form-control">
                                     <option selected="" value="{{i.Group}}">{{i.Group}}</option>
                                     <option value="Pending">Pending Applicants</option>
                                     <option value="Booked">Booked Applicants</option>
                                     <option value="Ready">Ready Applicants</option>
                                     <option value="Active">Active Applicants</option>
                                     <option value="Declined">Declined</option>

                                   </select>
                                 </span>
                                 <a class="d-block my-4 fs-5 text-dark fw-semibold link-primary" href="">
                                   {{i.Full_Name}}</a>
                                 <div class="d-flex align-items-center gap-4">
                                   <div class="d-flex align-items-center gap-2">
                                     <i class="ti-email text-dark fs-5" style="padding-right:5px"></i>{{i.Email}}
                                   </div>



                                 </div>
                                 <hr>
                                 <div class="row">
                                 <div style="padding-top:5px" class="col-12">
                                   <a href="{% url 'manager_edit' i.id %}" class="btn bg-warning-subtle text-warning w-100 rounded-pill">View Profile</a>

                                 </div>

                               </div>


                                 <div style="padding-top:5px" class="col-12">
                                   <a onclick="Open('{{i.id}}')" class="btn bg-danger-subtle text-danger w-100 rounded-pill">Delete Client</a>

                                 </div>
                               </div>



                               </div>
                             </div>

               {% endfor %}





                         </div>
                      </div>
                    </div>
                  </div>
                </div>




              </div>
            </div>

            <!-- end Alternative Pagination -->
          </div>
        </div>
      </div>
    </div>

      {% include "New/Extra/footer.html" %}




      <div id="cover"  style="background-color: rgba(15, 15, 15, 0.514);width: 100%;height: 100%;position: fixed;top:0px;text-align: center;visibility: hidden">
        <div class="col-xl-4 col-lg-4 col-xxl-4 col-md-12" style="position: fixed;top:30%;left: 40%;">
          <div class="card" id="cmain" style="visibility: hidden">
            <div class="card-body text-center ai-icon  text-primary" >
              <button style="position: absolute;right: 20px;" class="btn btn-sm btn-danger" onclick="Close()">x</button>
              <svg id="icon-customers" xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" style="stroke-dasharray: 25, 45; stroke-dashoffset: 0;"></path>
                <path d="M8,7A4,4 0,1,1 16,7A4,4 0,1,1 8,7" style="stroke-dasharray: 26, 46; stroke-dashoffset: 0;"></path>
              </svg>
              <h4 class="my-2">Type "DELETE ACCOUNT" in the form below to delete Account.</h4>
              <div class="form-group" >

                <input type="text" id="pass2" class="form-control" style="text-align: center;" >
              </div>
              <button onclick="Delete()" id="si_button" class="btn my-2 btn-primary btn-lg px-4"><i class="ti-trash"></i> Delete</button>
            </div>
          </div>
        </div>
      </div>
      <input id="state" type="hidden">

      <script>
        setInterval(load_all,1000);
      function load_all(){


          var pass2 = document.getElementById("pass2").value
      if (pass2==="DELETE ACCOUNT"){

       document.getElementById("si_button").disabled = false;
      }else{
       document.getElementById("si_button").disabled = true;
      }
      }

      function Open(id){
      document.getElementById("state").value = id
      document.getElementById('cover').setAttribute("style", "background-color:rgba(15, 15, 15, 0.514);width: 100%;height: 100%;position: fixed;top:0px;text-align: center;visibility: visible")
      document.getElementById('cmain').setAttribute("style", "visibility: visible")

      }
      function Close(){
      document.getElementById('cover').setAttribute("style", "visibility: hidden;z-index: 0;")
      document.getElementById('cmain').setAttribute("style", "z-index: 0;visibility: hidden;")

      }


      function Delete(){
        var state = document.getElementById("state")
      data = JSON.stringify({
      id:state.value,
      })
      fetch("{% url 'manager_account' %}", {
      method: 'POST',
      body: data,
      headers: { 'X-CSRFToken': csrftoken,'Accept': 'application/json, text/plain, */*',
          'Content-Type': 'application/json',
          },
      })
      .then(response => response.json())
      .then(data => {
      if (data === 'Ok'){
          document.getElementById(state.value).remove()
          state.value=""
          document.getElementById("pass2").value=""
          alert("Account has been deleted successfully!")
      Close()
      }else{
          alert("Please an error occured when deleting account!")

      }
      });}





      function stat_up(id){
        var state = document.getElementById("state_"+id)
      data = JSON.stringify({
      id:id,
      Status:state.value
      })
      fetch("{% url 'update_proccess' %}", {
      method: 'POST',
      body: data,
      headers: { 'X-CSRFToken': csrftoken,'Accept': 'application/json, text/plain, */*',
          'Content-Type': 'application/json',
          },
      })
      .then(response => response.json())
      .then(data => {
      if (data === 'Ok'){

          alert("Account has been updated successfully!")

      }else{
          alert("Please an error occured when updating account!")

      }
      });}
      </script>