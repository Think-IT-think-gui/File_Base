{% load static %}
<link rel="stylesheet" href="{% get_static_prefix %}Administrator/vendors/feather/feather.css">
  <link rel="stylesheet" href="{% get_static_prefix %}Administrator/vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="{% get_static_prefix %}Administrator/vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- inject:css -->

  <!-- endinject -->
  <link rel="shortcut icon" href="{% get_static_prefix %}Administrator/images/favicon.png" />
<style>

    .home-button {
    display: inline-block;
    padding: 12px 24px;
    background-color: #007bff; /* Bootstrap primary blue */
    color: white;
    font-size: 18px;
    font-weight: bold;
    text-decoration: none;
    border-radius: 8px;
    transition: background 0.3s ease, transform 0.2s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.home-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
    transform: translateY(-2px); /* Slight lift effect */
}

.home-button:active {
    background-color: #003f7f; /* Even darker on click */
    transform: translateY(1px); /* Push-down effect */
}
.card-title {
    font-size: 36px;
    font-weight: 700;
    color: #2c3e50; /* Deep grayish blue */
    text-align: center;
    margin-bottom: 10px;
    letter-spacing: 1px;
    text-transform: capitalize;
    position: relative;
}

.card-title::after {
    content: "";
    display: block;
    width: 60px;
    height: 4px;
    background-color: #007bff; /* Primary blue */
    margin: 8px auto 0;
    border-radius: 2px;
}

</style>
<link rel="stylesheet" href="{% get_static_prefix %}New/assets/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css">


          <!--  Header End -->
          <div class="card shadow-none position-relative overflow-hidden mb-4">
            <div class="card-body d-flex align-items-center justify-content-between p-4">
              <h1 class="card-title mb-0">Visit Traffic Statistics</h1>
              <nav aria-label="breadcrumb">
              <a href="{% url 'admin_dashboard' %}" class="home-button">üè† Go Home</a>

              </nav>
            </div>
          </div>
          <div class="datatables">
            <!-- start Zero Configuration -->
            <div class="card">
              <div class="card-body">



                <div class="row">

                  <div class="col-lg-12 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <h4 class="card-title">Site Visits Grouped By Regions (Bar Graph)</h4>
                        <canvas id="barChart"></canvas>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-6 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <h4 class="card-title">Site Visits Grouped By Regions (Line Graph)</h4>
                        <canvas id="areaChart"></canvas>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <h4 class="card-title">Site Visits Grouped By Regions (Doughnut chart)</h4>
                        <canvas id="doughnutChart"></canvas>
                      </div>
                    </div>
                  </div>

              </div>
            </div>

            <!-- end Alternative Pagination -->
          </div>
        </div>
      </div>
    </div>
    <script src="{% get_static_prefix %}Administrator/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="{% get_static_prefix %}Administrator/vendors/chart.js/Chart.min.js"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="{% get_static_prefix %}Administrator/js/off-canvas.js"></script>
    <script src="{% get_static_prefix %}Administrator/js/hoverable-collapse.js"></script>
    <script src="{% get_static_prefix %}Administrator/js/template.js"></script>
    <script src="{% get_static_prefix %}Administrator/js/settings.js"></script>
    <script src="{% get_static_prefix %}Administrator/js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="{% get_static_prefix %}Administrator/js/chart.j"></script>
    <!-- End custom js for this page-->
  </body>

  </html>


  <script>

  function generateColors() {


            let r = Math.floor(Math.random() * 255);
            let g = Math.floor(Math.random() * 255);
            let b = Math.floor(Math.random() * 255);


        return (`rgba(${r}, ${g}, ${b}, ${0.2})`);
    }


    $(function() {
      /* ChartJS
       * -------
       * Data and config for chartjs
       */
      'use strict';
      var data = {
        labels: [
        {% for i in Listed %}
        "{{i.Location}}",
         {% endfor %}
         ],
        datasets: [{
          label: '# of IPs',
          data: [
          {% for i in Listed %}
            {{i.Count}},
            {% endfor %}
          ],
          backgroundColor: [

            {% for i in Listed %}
           generateColors(),
            {% endfor %}
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              {% for i in Listed %}
           generateColors(),
            {% endfor %}
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1,
          fill: false
        }]
      };
      var multiLineData = {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: 'Dataset 1',
            data: [
            {% for i in Listed %}
            {{i.Count}},
            {% endfor %}
            ],
            borderColor: [
              '#587ce4'
            ],
            borderWidth: 2,
            fill: false
          },

        ]
      };
      var options = {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        },
        legend: {
          display: false
        },
        elements: {
          point: {
            radius: 0
          }
        }

      };
      var doughnutPieData = {
        datasets: [{
          data: [
          {% for i in Listed %}
          {{i.Count}},
          {% endfor %}
          ],
          backgroundColor: [
              {% for i in Listed %}
           generateColors(),
            {% endfor %}
            'rgba(54, 162, 235, 0.5)',
            'rgba(255, 206, 86, 0.5)',
            'rgba(75, 192, 192, 0.5)',
            'rgba(153, 102, 255, 0.5)',
            'rgba(255, 159, 64, 0.5)'
          ],
          borderColor: [
              {% for i in Listed %}
           generateColors(),
            {% endfor %}
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)'
          ],
        }],

        // These labels appear in the legend and in the tooltips when hovering different arcs
        labels: [
        {% for i in Listed %}
        "{{i.Location}}",
         {% endfor %}
         ],
      };
      var doughnutPieOptions = {
        responsive: true,
        animation: {
          animateScale: true,
          animateRotate: true
        }
      };
      var areaData = {
        labels: [
        {% for i in Listed %}
        "{{i.Location}}",
         {% endfor %}
         ],
        datasets: [{
          label: '# of IPs',
          data: [
            {% for i in Listed %}
            {{i.Count}},
            {% endfor %}
            ],
          backgroundColor: [
             {% for i in Listed %}
           generateColors(),
            {% endfor %}
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              {% for i in Listed %}
           generateColors(),
            {% endfor %}
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1,
          fill: true, // 3: no fill
        }]
      };

      var areaOptions = {
        plugins: {
          filler: {
            propagate: true
          }
        }
      }

      var multiAreaData = {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [{
            label: 'Facebook',
            data: [8, 11, 13, 15, 12, 13, 16, 15, 13, 19, 11, 14],
            borderColor: ['rgba(255, 99, 132, 0.5)'],
            backgroundColor: ['rgba(255, 99, 132, 0.5)'],
            borderWidth: 1,
            fill: true
          },
          {
            label: 'Twitter',
            data: [7, 17, 12, 16, 14, 18, 16, 12, 15, 11, 13, 9],
            borderColor: ['rgba(54, 162, 235, 0.5)'],
            backgroundColor: ['rgba(54, 162, 235, 0.5)'],
            borderWidth: 1,
            fill: true
          },
          {
            label: 'Linkedin',
            data: [6, 14, 16, 20, 12, 18, 15, 12, 17, 19, 15, 11],
            borderColor: ['rgba(255, 206, 86, 0.5)'],
            backgroundColor: ['rgba(255, 206, 86, 0.5)'],
            borderWidth: 1,
            fill: true
          }
        ]
      };

      var multiAreaOptions = {
        plugins: {
          filler: {
            propagate: true
          }
        },
        elements: {
          point: {
            radius: 0
          }
        },
        scales: {
          xAxes: [{
            gridLines: {
              display: false
            }
          }],
          yAxes: [{
            gridLines: {
              display: false
            }
          }]
        }
      }

      var scatterChartData = {
        datasets: [{
            label: 'First Dataset',
            data: [{
                x: -10,
                y: 0
              },
              {
                x: 0,
                y: 3
              },
              {
                x: -25,
                y: 5
              },
              {
                x: 40,
                y: 5
              }
            ],
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)'
            ],
            borderColor: [
              'rgba(255,99,132,1)'
            ],
            borderWidth: 1
          },
          {
            label: 'Second Dataset',
            data: [{
                x: 10,
                y: 5
              },
              {
                x: 20,
                y: -30
              },
              {
                x: -25,
                y: 15
              },
              {
                x: -10,
                y: 5
              }
            ],
            backgroundColor: [
              'rgba(54, 162, 235, 0.2)',
            ],
            borderColor: [
              'rgba(54, 162, 235, 1)',
            ],
            borderWidth: 1
          }
        ]
      }

      var scatterChartOptions = {
        scales: {
          xAxes: [{
            type: 'linear',
            position: 'bottom'
          }]
        }
      }
      // Get context with jQuery - using jQuery's .get() method.
      if ($("#barChart").length) {
        var barChartCanvas = $("#barChart").get(0).getContext("2d");
        // This will get the first returned node in the jQuery collection.
        var barChart = new Chart(barChartCanvas, {
          type: 'bar',
          data: data,
          options: options
        });
      }

      if ($("#lineChart").length) {
        var lineChartCanvas = $("#lineChart").get(0).getContext("2d");
        var lineChart = new Chart(lineChartCanvas, {
          type: 'line',
          data: data,
          options: options
        });
      }

      if ($("#linechart-multi").length) {
        var multiLineCanvas = $("#linechart-multi").get(0).getContext("2d");
        var lineChart = new Chart(multiLineCanvas, {
          type: 'line',
          data: multiLineData,
          options: options
        });
      }

      if ($("#areachart-multi").length) {
        var multiAreaCanvas = $("#areachart-multi").get(0).getContext("2d");
        var multiAreaChart = new Chart(multiAreaCanvas, {
          type: 'line',
          data: multiAreaData,
          options: multiAreaOptions
        });
      }

      if ($("#doughnutChart").length) {
        var doughnutChartCanvas = $("#doughnutChart").get(0).getContext("2d");
        var doughnutChart = new Chart(doughnutChartCanvas, {
          type: 'doughnut',
          data: doughnutPieData,
          options: doughnutPieOptions
        });
      }

      if ($("#pieChart").length) {
        var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
        var pieChart = new Chart(pieChartCanvas, {
          type: 'pie',
          data: doughnutPieData,
          options: doughnutPieOptions
        });
      }

      if ($("#areaChart").length) {
        var areaChartCanvas = $("#areaChart").get(0).getContext("2d");
        var areaChart = new Chart(areaChartCanvas, {
          type: 'line',
          data: areaData,
          options: areaOptions
        });
      }

      if ($("#scatterChart").length) {
        var scatterChartCanvas = $("#scatterChart").get(0).getContext("2d");
        var scatterChart = new Chart(scatterChartCanvas, {
          type: 'scatter',
          data: scatterChartData,
          options: scatterChartOptions
        });
      }

      if ($("#browserTrafficChart").length) {
        var doughnutChartCanvas = $("#browserTrafficChart").get(0).getContext("2d");
        var doughnutChart = new Chart(doughnutChartCanvas, {
          type: 'doughnut',
          data: browserTrafficData,
          options: doughnutPieOptions
        });
      }
    });
  </script>

